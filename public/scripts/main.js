/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/firebase/app/dist/index.esm.js":
/*!*****************************************************!*\
  !*** ./node_modules/firebase/app/dist/index.esm.js ***!
  \*****************************************************/
/***/ (() => {

"use strict";
eval("/* empty/unused harmony star reexport */\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module '@firebase/app'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\n\nvar name = \"firebase\";\nvar version = \"9.6.7\";\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module '@firebase/app'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(name, version, 'app');\n//# sourceMappingURL=index.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvYXBwL2Rpc3QvaW5kZXguZXNtLmpzLmpzIiwibWFwcGluZ3MiOiI7O0FBQWdEO0FBQ2xCOztBQUU5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNElBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZyaWVuZGx5Y2hhdC8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9hcHAvZGlzdC9pbmRleC5lc20uanM/MjYwYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmV4cG9ydCAqIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuXG52YXIgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbnZhciB2ZXJzaW9uID0gXCI5LjYuN1wiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2FwcCcpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/firebase/app/dist/index.esm.js\n");

/***/ }),

/***/ "./node_modules/firebase/auth/dist/index.esm.js":
/*!******************************************************!*\
  !*** ./node_modules/firebase/auth/dist/index.esm.js ***!
  \******************************************************/
/***/ (() => {

throw new Error("Module build failed: Error: ENOENT: no such file or directory, open '/home/shrey/Desktop/fire2/node_modules/firebase/auth/dist/index.esm.js'");

/***/ }),

/***/ "./node_modules/firebase/firestore/dist/index.esm.js":
/*!***********************************************************!*\
  !*** ./node_modules/firebase/firestore/dist/index.esm.js ***!
  \***********************************************************/
/***/ (() => {

throw new Error("Module build failed: Error: ENOENT: no such file or directory, open '/home/shrey/Desktop/fire2/node_modules/firebase/firestore/dist/index.esm.js'");

/***/ }),

/***/ "./node_modules/firebase/messaging/dist/index.esm.js":
/*!***********************************************************!*\
  !*** ./node_modules/firebase/messaging/dist/index.esm.js ***!
  \***********************************************************/
/***/ (() => {

throw new Error("Module build failed: Error: ENOENT: no such file or directory, open '/home/shrey/Desktop/fire2/node_modules/firebase/messaging/dist/index.esm.js'");

/***/ }),

/***/ "./node_modules/firebase/performance/dist/index.esm.js":
/*!*************************************************************!*\
  !*** ./node_modules/firebase/performance/dist/index.esm.js ***!
  \*************************************************************/
/***/ (() => {

throw new Error("Module build failed: Error: ENOENT: no such file or directory, open '/home/shrey/Desktop/fire2/node_modules/firebase/performance/dist/index.esm.js'");

/***/ }),

/***/ "./node_modules/firebase/storage/dist/index.esm.js":
/*!*********************************************************!*\
  !*** ./node_modules/firebase/storage/dist/index.esm.js ***!
  \*********************************************************/
/***/ (() => {

throw new Error("Module build failed: Error: ENOENT: no such file or directory, open '/home/shrey/Desktop/fire2/node_modules/firebase/storage/dist/index.esm.js'");

/***/ }),

/***/ "./src/firebase-config.js":
/*!********************************!*\
  !*** ./src/firebase-config.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getFirebaseConfig\": () => (/* binding */ getFirebaseConfig)\n/* harmony export */ });\n/**\n * To find your Firebase config object:\n *\n * 1. Go to your [Project settings in the Firebase console](https://console.firebase.google.com/project/_/settings/general/)\n * 2. In the \"Your apps\" card, select the nickname of the app for which you need a config object.\n * 3. Select Config from the Firebase SDK snippet pane.\n * 4. Copy the config object snippet, then add it here.\n */\nconst config = {\n  apiKey: \"AIzaSyDOQXX5mymdcG0-xLPruH3iQuJWF17FY2c\",\n  authDomain: \"chat2-7d546.firebaseapp.com\",\n  projectId: \"chat2-7d546\",\n  storageBucket: \"chat2-7d546.appspot.com\",\n  messagingSenderId: \"205229888721\",\n  appId: \"1:205229888721:web:794a0b54634c3d500061f0\",\n  measurementId: \"G-VZC9ZFCBWT\"\n};\n\nfunction getFirebaseConfig() {\n  if (!config || !config.apiKey) {\n    throw new Error('No Firebase configuration object provided.' + '\\n' +\n    'Add your web app\\'s configuration object to firebase-config.js');\n  } else {\n    return config;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZmlyZWJhc2UtY29uZmlnLmpzLmpzIiwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJpZW5kbHljaGF0Ly4vc3JjL2ZpcmViYXNlLWNvbmZpZy5qcz9kZmRkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVG8gZmluZCB5b3VyIEZpcmViYXNlIGNvbmZpZyBvYmplY3Q6XG4gKlxuICogMS4gR28gdG8geW91ciBbUHJvamVjdCBzZXR0aW5ncyBpbiB0aGUgRmlyZWJhc2UgY29uc29sZV0oaHR0cHM6Ly9jb25zb2xlLmZpcmViYXNlLmdvb2dsZS5jb20vcHJvamVjdC9fL3NldHRpbmdzL2dlbmVyYWwvKVxuICogMi4gSW4gdGhlIFwiWW91ciBhcHBzXCIgY2FyZCwgc2VsZWN0IHRoZSBuaWNrbmFtZSBvZiB0aGUgYXBwIGZvciB3aGljaCB5b3UgbmVlZCBhIGNvbmZpZyBvYmplY3QuXG4gKiAzLiBTZWxlY3QgQ29uZmlnIGZyb20gdGhlIEZpcmViYXNlIFNESyBzbmlwcGV0IHBhbmUuXG4gKiA0LiBDb3B5IHRoZSBjb25maWcgb2JqZWN0IHNuaXBwZXQsIHRoZW4gYWRkIGl0IGhlcmUuXG4gKi9cbmNvbnN0IGNvbmZpZyA9IHtcbiAgYXBpS2V5OiBcIkFJemFTeURPUVhYNW15bWRjRzAteExQcnVIM2lRdUpXRjE3RlkyY1wiLFxuICBhdXRoRG9tYWluOiBcImNoYXQyLTdkNTQ2LmZpcmViYXNlYXBwLmNvbVwiLFxuICBwcm9qZWN0SWQ6IFwiY2hhdDItN2Q1NDZcIixcbiAgc3RvcmFnZUJ1Y2tldDogXCJjaGF0Mi03ZDU0Ni5hcHBzcG90LmNvbVwiLFxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCIyMDUyMjk4ODg3MjFcIixcbiAgYXBwSWQ6IFwiMToyMDUyMjk4ODg3MjE6d2ViOjc5NGEwYjU0NjM0YzNkNTAwMDYxZjBcIixcbiAgbWVhc3VyZW1lbnRJZDogXCJHLVZaQzlaRkNCV1RcIlxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpcmViYXNlQ29uZmlnKCkge1xuICBpZiAoIWNvbmZpZyB8fCAhY29uZmlnLmFwaUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gRmlyZWJhc2UgY29uZmlndXJhdGlvbiBvYmplY3QgcHJvdmlkZWQuJyArICdcXG4nICtcbiAgICAnQWRkIHlvdXIgd2ViIGFwcFxcJ3MgY29uZmlndXJhdGlvbiBvYmplY3QgdG8gZmlyZWJhc2UtY29uZmlnLmpzJyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNvbmZpZztcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/firebase-config.js\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
eval("/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"./node_modules/firebase/app/dist/index.esm.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/auth */ \"./node_modules/firebase/auth/dist/index.esm.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/index.esm.js\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/storage */ \"./node_modules/firebase/storage/dist/index.esm.js\");\n/* harmony import */ var firebase_messaging__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! firebase/messaging */ \"./node_modules/firebase/messaging/dist/index.esm.js\");\n/* harmony import */ var firebase_performance__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/performance */ \"./node_modules/firebase/performance/dist/index.esm.js\");\n/* harmony import */ var _firebase_config_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./firebase-config.js */ \"./src/firebase-config.js\");\n\n \n\n \n \n \n \n \n \n\n \n\n // Signs-in Friendly Chat.\n async function signIn() {\n   // Sign in Firebase using popup auth and Google as the identity provider.\n   var provider = new firebase_auth__WEBPACK_IMPORTED_MODULE_1__.GoogleAuthProvider();\n   await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.signInWithPopup)((0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(), provider);\n }\n\n // Signs-out of Friendly Chat.\n function signOutUser() {\n   // Sign out of Firebase.\n   (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.signOut)((0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)());\n }\n\n // Initialize firebase auth\n function initFirebaseAuth() {\n   // Listen to auth state changes.\n   (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.onAuthStateChanged)((0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(), authStateObserver);\n }\n\n // Returns the signed-in user's profile Pic URL.\n function getProfilePicUrl() {\n   return (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)().currentUser.photoURL || '/images/profile_placeholder.png';\n }\n\n // Returns the signed-in user's display name.\n function getUserName() {\n   return (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)().currentUser.displayName;\n }\n\n // Returns true if a user is signed-in.\n function isUserSignedIn() {\n   return !!(0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)().currentUser;\n }\n\n // Saves a new message to Cloud Firestore.\n async function saveMessage(messageText) {\n   // Add a new message entry to the Firebase database.\n   try {\n     await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(), 'messages'), {\n       name: getUserName(),\n       text: messageText,\n       profilePicUrl: getProfilePicUrl(),\n       timestamp: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n     });\n   }\n   catch(error) {\n     console.error('Error writing new message to Firebase Database', error);\n   }\n }\n\n // Loads chat messages history and listens for upcoming ones.\n function loadMessages() {\n   // Create the query to load the last 12 messages and listen for new ones.\n   const recentMessagesQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(), 'messages'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.orderBy)('timestamp', 'desc'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(12));\n\n   // Start listening to the query.\n   (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(recentMessagesQuery, function(snapshot) {\n     snapshot.docChanges().forEach(function(change) {\n       if (change.type === 'removed') {\n         deleteMessage(change.doc.id);\n       } else {\n         var message = change.doc.data();\n         displayMessage(change.doc.id, message.timestamp, message.name,\n                       message.text, message.profilePicUrl, message.imageUrl);\n       }\n     });\n   });\n }\n\n // Saves a new message containing an image in Firebase.\n // This first saves the image in Firebase storage.\n async function saveImageMessage(file) {\n   try {\n     // 1 - We add a message with a loading icon that will get updated with the shared image.\n     const messageRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(), 'messages'), {\n       name: getUserName(),\n       imageUrl: LOADING_IMAGE_URL,\n       profilePicUrl: getProfilePicUrl(),\n       timestamp: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n     });\n\n     // 2 - Upload the image to Cloud Storage.\n     const filePath = `${(0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)().currentUser.uid}/${messageRef.id}/${file.name}`;\n     const newImageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_3__.ref)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_3__.getStorage)(), filePath);\n     const fileSnapshot = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_3__.uploadBytesResumable)(newImageRef, file);\n\n     // 3 - Generate a public URL for the file.\n     const publicImageUrl = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_3__.getDownloadURL)(newImageRef);\n\n     // 4 - Update the chat message placeholder with the imageâ€™s URL.\n     await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(messageRef,{\n       imageUrl: publicImageUrl,\n       storageUri: fileSnapshot.metadata.fullPath\n     });\n   } catch (error) {\n     console.error('There was an error uploading a file to Cloud Storage:', error);\n   }\n }\n\n // Saves the messaging device token to Cloud Firestore.\n async function saveMessagingDeviceToken() {\n   try {\n     const currentToken = await (0,firebase_messaging__WEBPACK_IMPORTED_MODULE_4__.getToken)((0,firebase_messaging__WEBPACK_IMPORTED_MODULE_4__.getMessaging)());\n     if (currentToken) {\n       console.log('Got FCM device token:', currentToken);\n       // Saving the Device Token to Cloud Firestore.\n       const tokenRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(), 'fcmTokens', currentToken);\n       await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.setDoc)(tokenRef, { uid: (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)().currentUser.uid });\n\n       // This will fire when a message is received while the app is in the foreground.\n       // When the app is in the background, firebase-messaging-sw.js will receive the message instead.\n       (0,firebase_messaging__WEBPACK_IMPORTED_MODULE_4__.onMessage)((0,firebase_messaging__WEBPACK_IMPORTED_MODULE_4__.getMessaging)(), (message) => {\n         console.log(\n           'New foreground notification from Firebase Messaging!',\n           message.notification\n         );\n       });\n     } else {\n       // Need to request permissions to show notifications.\n       requestNotificationsPermissions();\n     }\n   } catch(error) {\n     console.error('Unable to get messaging token.', error);\n   };\n }\n\n // Requests permissions to show notifications.\n async function requestNotificationsPermissions() {\n   console.log('Requesting notifications permission...');\n   const permission = await Notification.requestPermission();\n\n   if (permission === 'granted') {\n     console.log('Notification permission granted.');\n     // Notification permission granted.\n     await saveMessagingDeviceToken();\n   } else {\n     console.log('Unable to get permission to notify.');\n   }\n }\n\n // Triggered when a file is selected via the media picker.\n function onMediaFileSelected(event) {\n   event.preventDefault();\n   var file = event.target.files[0];\n\n   // Clear the selection in the file picker input.\n   imageFormElement.reset();\n\n   // Check if the file is an image.\n   if (!file.type.match('image.*')) {\n     var data = {\n       message: 'You can only share images',\n       timeout: 2000\n     };\n     signInSnackbarElement.MaterialSnackbar.showSnackbar(data);\n     return;\n   }\n   // Check if the user is signed-in\n   if (checkSignedInWithMessage()) {\n     saveImageMessage(file);\n   }\n }\n\n // Triggered when the send new message form is submitted.\n function onMessageFormSubmit(e) {\n   e.preventDefault();\n   // Check that the user entered a message and is signed in.\n   if (messageInputElement.value && checkSignedInWithMessage()) {\n     saveMessage(messageInputElement.value).then(function() {\n       // Clear message text field and re-enable the SEND button.\n       resetMaterialTextfield(messageInputElement);\n       toggleButton();\n     });\n   }\n }\n\n // Triggers when the auth state change for instance when the user signs-in or signs-out.\n function authStateObserver(user) {\n   if (user) { // User is signed in!\n     // Get the signed-in user's profile pic and name.\n     var profilePicUrl = getProfilePicUrl();\n     var userName = getUserName();\n\n     // Set the user's profile pic and name.\n     userPicElement.style.backgroundImage = 'url(' + addSizeToGoogleProfilePic(profilePicUrl) + ')';\n     userNameElement.textContent = userName;\n\n     // Show user's profile and sign-out button.\n     userNameElement.removeAttribute('hidden');\n     userPicElement.removeAttribute('hidden');\n     signOutButtonElement.removeAttribute('hidden');\n\n     // Hide sign-in button.\n     signInButtonElement.setAttribute('hidden', 'true');\n\n     // We save the Firebase Messaging Device token and enable notifications.\n     saveMessagingDeviceToken();\n   } else { // User is signed out!\n     // Hide user's profile and sign-out button.\n     userNameElement.setAttribute('hidden', 'true');\n     userPicElement.setAttribute('hidden', 'true');\n     signOutButtonElement.setAttribute('hidden', 'true');\n\n     // Show sign-in button.\n     signInButtonElement.removeAttribute('hidden');\n   }\n }\n\n // Returns true if user is signed-in. Otherwise false and displays a message.\n function checkSignedInWithMessage() {\n   // Return true if the user is signed in Firebase\n   if (isUserSignedIn()) {\n     return true;\n   }\n\n   // Display a message to the user using a Toast.\n   var data = {\n     message: 'You must sign-in first',\n     timeout: 2000\n   };\n   signInSnackbarElement.MaterialSnackbar.showSnackbar(data);\n   return false;\n }\n\n // Resets the given MaterialTextField.\n function resetMaterialTextfield(element) {\n   element.value = '';\n   element.parentNode.MaterialTextfield.boundUpdateClassesHandler();\n }\n\n // Template for messages.\n var MESSAGE_TEMPLATE =\n     '<div class=\"message-container\">' +\n       '<div class=\"spacing\"><div class=\"pic\"></div></div>' +\n       '<div class=\"message\"></div>' +\n       '<div class=\"name\"></div>' +\n     '</div>';\n\n // Adds a size to Google Profile pics URLs.\n function addSizeToGoogleProfilePic(url) {\n   if (url.indexOf('googleusercontent.com') !== -1 && url.indexOf('?') === -1) {\n     return url + '?sz=150';\n   }\n   return url;\n }\n\n // A loading image URL.\n var LOADING_IMAGE_URL = 'https://www.google.com/images/spin-32.gif?a';\n\n // Delete a Message from the UI.\n function deleteMessage(id) {\n   var div = document.getElementById(id);\n   // If an element for that message exists we delete it.\n   if (div) {\n     div.parentNode.removeChild(div);\n   }\n }\n\n function createAndInsertMessage(id, timestamp) {\n   const container = document.createElement('div');\n   container.innerHTML = MESSAGE_TEMPLATE;\n   const div = container.firstChild;\n   div.setAttribute('id', id);\n\n   // If timestamp is null, assume we've gotten a brand new message.\n   // https://stackoverflow.com/a/47781432/4816918\n   timestamp = timestamp ? timestamp.toMillis() : Date.now();\n   div.setAttribute('timestamp', timestamp);\n\n   // figure out where to insert new message\n   const existingMessages = messageListElement.children;\n   if (existingMessages.length === 0) {\n     messageListElement.appendChild(div);\n   } else {\n     let messageListNode = existingMessages[0];\n\n     while (messageListNode) {\n       const messageListNodeTime = messageListNode.getAttribute('timestamp');\n\n       if (!messageListNodeTime) {\n         throw new Error(\n           `Child ${messageListNode.id} has no 'timestamp' attribute`\n         );\n       }\n\n       if (messageListNodeTime > timestamp) {\n         break;\n       }\n\n       messageListNode = messageListNode.nextSibling;\n     }\n\n     messageListElement.insertBefore(div, messageListNode);\n   }\n\n   return div;\n }\n\n // Displays a Message in the UI.\n function displayMessage(id, timestamp, name, text, picUrl, imageUrl) {\n   var div = document.getElementById(id) || createAndInsertMessage(id, timestamp);\n\n   // profile picture\n   if (picUrl) {\n     div.querySelector('.pic').style.backgroundImage = 'url(' + addSizeToGoogleProfilePic(picUrl) + ')';\n   }\n\n   div.querySelector('.name').textContent = name;\n   var messageElement = div.querySelector('.message');\n\n   if (text) { // If the message is text.\n     messageElement.textContent = text;\n     // Replace all line breaks by <br>.\n     messageElement.innerHTML = messageElement.innerHTML.replace(/\\n/g, '<br>');\n   } else if (imageUrl) { // If the message is an image.\n     var image = document.createElement('img');\n     image.addEventListener('load', function() {\n       messageListElement.scrollTop = messageListElement.scrollHeight;\n     });\n     image.src = imageUrl + '&' + new Date().getTime();\n     messageElement.innerHTML = '';\n     messageElement.appendChild(image);\n   }\n   // Show the card fading-in and scroll to view the new message.\n   setTimeout(function() {div.classList.add('visible')}, 1);\n   messageListElement.scrollTop = messageListElement.scrollHeight;\n   messageInputElement.focus();\n }\n\n // Enables or disables the submit button depending on the values of the input\n // fields.\n function toggleButton() {\n   if (messageInputElement.value) {\n     submitButtonElement.removeAttribute('disabled');\n   } else {\n     submitButtonElement.setAttribute('disabled', 'true');\n   }\n }\n\n // Shortcuts to DOM Elements.\n var messageListElement = document.getElementById('messages');\n var messageFormElement = document.getElementById('message-form');\n var messageInputElement = document.getElementById('message');\n var submitButtonElement = document.getElementById('submit');\n var imageButtonElement = document.getElementById('submitImage');\n var imageFormElement = document.getElementById('image-form');\n var mediaCaptureElement = document.getElementById('mediaCapture');\n var userPicElement = document.getElementById('user-pic');\n var userNameElement = document.getElementById('user-name');\n var signInButtonElement = document.getElementById('sign-in');\n var signOutButtonElement = document.getElementById('sign-out');\n var signInSnackbarElement = document.getElementById('must-signin-snackbar');\n\n // Saves message on form submit.\n messageFormElement.addEventListener('submit', onMessageFormSubmit);\n signOutButtonElement.addEventListener('click', signOutUser);\n signInButtonElement.addEventListener('click', signIn);\n\n // Toggle for the button.\n messageInputElement.addEventListener('keyup', toggleButton);\n messageInputElement.addEventListener('change', toggleButton);\n\n // Events for image upload.\n imageButtonElement.addEventListener('click', function(e) {\n   e.preventDefault();\n   mediaCaptureElement.click();\n });\n mediaCaptureElement.addEventListener('change', onMediaFileSelected);\n\nconst firebaseApp = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)((0,_firebase_config_js__WEBPACK_IMPORTED_MODULE_6__.getFirebaseConfig)());\n(0,firebase_performance__WEBPACK_IMPORTED_MODULE_5__.getPerformance)();\ninitFirebaseAuth();\nloadMessages();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixvQkFBb0I7QUFDeEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBLEtBQUsscUJBQXFCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDZCQUE2QjtBQUN2RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBLG9CQUFvQiwyREFBYSxDQUFDLHNFQUFpQjtBQUNuRCxvRUFBYztBQUNkO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcmllbmRseWNoYXQvLi9zcmMvaW5kZXguanM/YjYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAndXNlIHN0cmljdCc7XG5cbiBpbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSAnZmlyZWJhc2UvYXBwJztcbiBpbXBvcnQge1xuICAgZ2V0QXV0aCxcbiAgIG9uQXV0aFN0YXRlQ2hhbmdlZCxcbiAgIEdvb2dsZUF1dGhQcm92aWRlcixcbiAgIHNpZ25JbldpdGhQb3B1cCxcbiAgIHNpZ25PdXQsXG4gfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcbiBpbXBvcnQge1xuICAgZ2V0RmlyZXN0b3JlLFxuICAgY29sbGVjdGlvbixcbiAgIGFkZERvYyxcbiAgIHF1ZXJ5LFxuICAgb3JkZXJCeSxcbiAgIGxpbWl0LFxuICAgb25TbmFwc2hvdCxcbiAgIHNldERvYyxcbiAgIHVwZGF0ZURvYyxcbiAgIGRvYyxcbiAgIHNlcnZlclRpbWVzdGFtcCxcbiB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG4gaW1wb3J0IHtcbiAgIGdldFN0b3JhZ2UsXG4gICByZWYsXG4gICB1cGxvYWRCeXRlc1Jlc3VtYWJsZSxcbiAgIGdldERvd25sb2FkVVJMLFxuIH0gZnJvbSAnZmlyZWJhc2Uvc3RvcmFnZSc7XG4gaW1wb3J0IHtcbiAgIGdldE1lc3NhZ2luZyxcbiAgIGdldFRva2VuLFxuICAgb25NZXNzYWdlXG4gfSBmcm9tICdmaXJlYmFzZS9tZXNzYWdpbmcnO1xuIGltcG9ydCB7IGdldFBlcmZvcm1hbmNlIH0gZnJvbSAnZmlyZWJhc2UvcGVyZm9ybWFuY2UnO1xuXG4gaW1wb3J0IHsgZ2V0RmlyZWJhc2VDb25maWcgfSBmcm9tICcuL2ZpcmViYXNlLWNvbmZpZy5qcyc7XG5cbiAvLyBTaWducy1pbiBGcmllbmRseSBDaGF0LlxuIGFzeW5jIGZ1bmN0aW9uIHNpZ25JbigpIHtcbiAgIC8vIFNpZ24gaW4gRmlyZWJhc2UgdXNpbmcgcG9wdXAgYXV0aCBhbmQgR29vZ2xlIGFzIHRoZSBpZGVudGl0eSBwcm92aWRlci5cbiAgIHZhciBwcm92aWRlciA9IG5ldyBHb29nbGVBdXRoUHJvdmlkZXIoKTtcbiAgIGF3YWl0IHNpZ25JbldpdGhQb3B1cChnZXRBdXRoKCksIHByb3ZpZGVyKTtcbiB9XG5cbiAvLyBTaWducy1vdXQgb2YgRnJpZW5kbHkgQ2hhdC5cbiBmdW5jdGlvbiBzaWduT3V0VXNlcigpIHtcbiAgIC8vIFNpZ24gb3V0IG9mIEZpcmViYXNlLlxuICAgc2lnbk91dChnZXRBdXRoKCkpO1xuIH1cblxuIC8vIEluaXRpYWxpemUgZmlyZWJhc2UgYXV0aFxuIGZ1bmN0aW9uIGluaXRGaXJlYmFzZUF1dGgoKSB7XG4gICAvLyBMaXN0ZW4gdG8gYXV0aCBzdGF0ZSBjaGFuZ2VzLlxuICAgb25BdXRoU3RhdGVDaGFuZ2VkKGdldEF1dGgoKSwgYXV0aFN0YXRlT2JzZXJ2ZXIpO1xuIH1cblxuIC8vIFJldHVybnMgdGhlIHNpZ25lZC1pbiB1c2VyJ3MgcHJvZmlsZSBQaWMgVVJMLlxuIGZ1bmN0aW9uIGdldFByb2ZpbGVQaWNVcmwoKSB7XG4gICByZXR1cm4gZ2V0QXV0aCgpLmN1cnJlbnRVc2VyLnBob3RvVVJMIHx8ICcvaW1hZ2VzL3Byb2ZpbGVfcGxhY2Vob2xkZXIucG5nJztcbiB9XG5cbiAvLyBSZXR1cm5zIHRoZSBzaWduZWQtaW4gdXNlcidzIGRpc3BsYXkgbmFtZS5cbiBmdW5jdGlvbiBnZXRVc2VyTmFtZSgpIHtcbiAgIHJldHVybiBnZXRBdXRoKCkuY3VycmVudFVzZXIuZGlzcGxheU5hbWU7XG4gfVxuXG4gLy8gUmV0dXJucyB0cnVlIGlmIGEgdXNlciBpcyBzaWduZWQtaW4uXG4gZnVuY3Rpb24gaXNVc2VyU2lnbmVkSW4oKSB7XG4gICByZXR1cm4gISFnZXRBdXRoKCkuY3VycmVudFVzZXI7XG4gfVxuXG4gLy8gU2F2ZXMgYSBuZXcgbWVzc2FnZSB0byBDbG91ZCBGaXJlc3RvcmUuXG4gYXN5bmMgZnVuY3Rpb24gc2F2ZU1lc3NhZ2UobWVzc2FnZVRleHQpIHtcbiAgIC8vIEFkZCBhIG5ldyBtZXNzYWdlIGVudHJ5IHRvIHRoZSBGaXJlYmFzZSBkYXRhYmFzZS5cbiAgIHRyeSB7XG4gICAgIGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGdldEZpcmVzdG9yZSgpLCAnbWVzc2FnZXMnKSwge1xuICAgICAgIG5hbWU6IGdldFVzZXJOYW1lKCksXG4gICAgICAgdGV4dDogbWVzc2FnZVRleHQsXG4gICAgICAgcHJvZmlsZVBpY1VybDogZ2V0UHJvZmlsZVBpY1VybCgpLFxuICAgICAgIHRpbWVzdGFtcDogc2VydmVyVGltZXN0YW1wKClcbiAgICAgfSk7XG4gICB9XG4gICBjYXRjaChlcnJvcikge1xuICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3cml0aW5nIG5ldyBtZXNzYWdlIHRvIEZpcmViYXNlIERhdGFiYXNlJywgZXJyb3IpO1xuICAgfVxuIH1cblxuIC8vIExvYWRzIGNoYXQgbWVzc2FnZXMgaGlzdG9yeSBhbmQgbGlzdGVucyBmb3IgdXBjb21pbmcgb25lcy5cbiBmdW5jdGlvbiBsb2FkTWVzc2FnZXMoKSB7XG4gICAvLyBDcmVhdGUgdGhlIHF1ZXJ5IHRvIGxvYWQgdGhlIGxhc3QgMTIgbWVzc2FnZXMgYW5kIGxpc3RlbiBmb3IgbmV3IG9uZXMuXG4gICBjb25zdCByZWNlbnRNZXNzYWdlc1F1ZXJ5ID0gcXVlcnkoY29sbGVjdGlvbihnZXRGaXJlc3RvcmUoKSwgJ21lc3NhZ2VzJyksIG9yZGVyQnkoJ3RpbWVzdGFtcCcsICdkZXNjJyksIGxpbWl0KDEyKSk7XG5cbiAgIC8vIFN0YXJ0IGxpc3RlbmluZyB0byB0aGUgcXVlcnkuXG4gICBvblNuYXBzaG90KHJlY2VudE1lc3NhZ2VzUXVlcnksIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG4gICAgIHNuYXBzaG90LmRvY0NoYW5nZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGNoYW5nZSkge1xuICAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ3JlbW92ZWQnKSB7XG4gICAgICAgICBkZWxldGVNZXNzYWdlKGNoYW5nZS5kb2MuaWQpO1xuICAgICAgIH0gZWxzZSB7XG4gICAgICAgICB2YXIgbWVzc2FnZSA9IGNoYW5nZS5kb2MuZGF0YSgpO1xuICAgICAgICAgZGlzcGxheU1lc3NhZ2UoY2hhbmdlLmRvYy5pZCwgbWVzc2FnZS50aW1lc3RhbXAsIG1lc3NhZ2UubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS50ZXh0LCBtZXNzYWdlLnByb2ZpbGVQaWNVcmwsIG1lc3NhZ2UuaW1hZ2VVcmwpO1xuICAgICAgIH1cbiAgICAgfSk7XG4gICB9KTtcbiB9XG5cbiAvLyBTYXZlcyBhIG5ldyBtZXNzYWdlIGNvbnRhaW5pbmcgYW4gaW1hZ2UgaW4gRmlyZWJhc2UuXG4gLy8gVGhpcyBmaXJzdCBzYXZlcyB0aGUgaW1hZ2UgaW4gRmlyZWJhc2Ugc3RvcmFnZS5cbiBhc3luYyBmdW5jdGlvbiBzYXZlSW1hZ2VNZXNzYWdlKGZpbGUpIHtcbiAgIHRyeSB7XG4gICAgIC8vIDEgLSBXZSBhZGQgYSBtZXNzYWdlIHdpdGggYSBsb2FkaW5nIGljb24gdGhhdCB3aWxsIGdldCB1cGRhdGVkIHdpdGggdGhlIHNoYXJlZCBpbWFnZS5cbiAgICAgY29uc3QgbWVzc2FnZVJlZiA9IGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGdldEZpcmVzdG9yZSgpLCAnbWVzc2FnZXMnKSwge1xuICAgICAgIG5hbWU6IGdldFVzZXJOYW1lKCksXG4gICAgICAgaW1hZ2VVcmw6IExPQURJTkdfSU1BR0VfVVJMLFxuICAgICAgIHByb2ZpbGVQaWNVcmw6IGdldFByb2ZpbGVQaWNVcmwoKSxcbiAgICAgICB0aW1lc3RhbXA6IHNlcnZlclRpbWVzdGFtcCgpXG4gICAgIH0pO1xuXG4gICAgIC8vIDIgLSBVcGxvYWQgdGhlIGltYWdlIHRvIENsb3VkIFN0b3JhZ2UuXG4gICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7Z2V0QXV0aCgpLmN1cnJlbnRVc2VyLnVpZH0vJHttZXNzYWdlUmVmLmlkfS8ke2ZpbGUubmFtZX1gO1xuICAgICBjb25zdCBuZXdJbWFnZVJlZiA9IHJlZihnZXRTdG9yYWdlKCksIGZpbGVQYXRoKTtcbiAgICAgY29uc3QgZmlsZVNuYXBzaG90ID0gYXdhaXQgdXBsb2FkQnl0ZXNSZXN1bWFibGUobmV3SW1hZ2VSZWYsIGZpbGUpO1xuXG4gICAgIC8vIDMgLSBHZW5lcmF0ZSBhIHB1YmxpYyBVUkwgZm9yIHRoZSBmaWxlLlxuICAgICBjb25zdCBwdWJsaWNJbWFnZVVybCA9IGF3YWl0IGdldERvd25sb2FkVVJMKG5ld0ltYWdlUmVmKTtcblxuICAgICAvLyA0IC0gVXBkYXRlIHRoZSBjaGF0IG1lc3NhZ2UgcGxhY2Vob2xkZXIgd2l0aCB0aGUgaW1hZ2XigJlzIFVSTC5cbiAgICAgYXdhaXQgdXBkYXRlRG9jKG1lc3NhZ2VSZWYse1xuICAgICAgIGltYWdlVXJsOiBwdWJsaWNJbWFnZVVybCxcbiAgICAgICBzdG9yYWdlVXJpOiBmaWxlU25hcHNob3QubWV0YWRhdGEuZnVsbFBhdGhcbiAgICAgfSk7XG4gICB9IGNhdGNoIChlcnJvcikge1xuICAgICBjb25zb2xlLmVycm9yKCdUaGVyZSB3YXMgYW4gZXJyb3IgdXBsb2FkaW5nIGEgZmlsZSB0byBDbG91ZCBTdG9yYWdlOicsIGVycm9yKTtcbiAgIH1cbiB9XG5cbiAvLyBTYXZlcyB0aGUgbWVzc2FnaW5nIGRldmljZSB0b2tlbiB0byBDbG91ZCBGaXJlc3RvcmUuXG4gYXN5bmMgZnVuY3Rpb24gc2F2ZU1lc3NhZ2luZ0RldmljZVRva2VuKCkge1xuICAgdHJ5IHtcbiAgICAgY29uc3QgY3VycmVudFRva2VuID0gYXdhaXQgZ2V0VG9rZW4oZ2V0TWVzc2FnaW5nKCkpO1xuICAgICBpZiAoY3VycmVudFRva2VuKSB7XG4gICAgICAgY29uc29sZS5sb2coJ0dvdCBGQ00gZGV2aWNlIHRva2VuOicsIGN1cnJlbnRUb2tlbik7XG4gICAgICAgLy8gU2F2aW5nIHRoZSBEZXZpY2UgVG9rZW4gdG8gQ2xvdWQgRmlyZXN0b3JlLlxuICAgICAgIGNvbnN0IHRva2VuUmVmID0gZG9jKGdldEZpcmVzdG9yZSgpLCAnZmNtVG9rZW5zJywgY3VycmVudFRva2VuKTtcbiAgICAgICBhd2FpdCBzZXREb2ModG9rZW5SZWYsIHsgdWlkOiBnZXRBdXRoKCkuY3VycmVudFVzZXIudWlkIH0pO1xuXG4gICAgICAgLy8gVGhpcyB3aWxsIGZpcmUgd2hlbiBhIG1lc3NhZ2UgaXMgcmVjZWl2ZWQgd2hpbGUgdGhlIGFwcCBpcyBpbiB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAvLyBXaGVuIHRoZSBhcHAgaXMgaW4gdGhlIGJhY2tncm91bmQsIGZpcmViYXNlLW1lc3NhZ2luZy1zdy5qcyB3aWxsIHJlY2VpdmUgdGhlIG1lc3NhZ2UgaW5zdGVhZC5cbiAgICAgICBvbk1lc3NhZ2UoZ2V0TWVzc2FnaW5nKCksIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgJ05ldyBmb3JlZ3JvdW5kIG5vdGlmaWNhdGlvbiBmcm9tIEZpcmViYXNlIE1lc3NhZ2luZyEnLFxuICAgICAgICAgICBtZXNzYWdlLm5vdGlmaWNhdGlvblxuICAgICAgICAgKTtcbiAgICAgICB9KTtcbiAgICAgfSBlbHNlIHtcbiAgICAgICAvLyBOZWVkIHRvIHJlcXVlc3QgcGVybWlzc2lvbnMgdG8gc2hvdyBub3RpZmljYXRpb25zLlxuICAgICAgIHJlcXVlc3ROb3RpZmljYXRpb25zUGVybWlzc2lvbnMoKTtcbiAgICAgfVxuICAgfSBjYXRjaChlcnJvcikge1xuICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZ2V0IG1lc3NhZ2luZyB0b2tlbi4nLCBlcnJvcik7XG4gICB9O1xuIH1cblxuIC8vIFJlcXVlc3RzIHBlcm1pc3Npb25zIHRvIHNob3cgbm90aWZpY2F0aW9ucy5cbiBhc3luYyBmdW5jdGlvbiByZXF1ZXN0Tm90aWZpY2F0aW9uc1Blcm1pc3Npb25zKCkge1xuICAgY29uc29sZS5sb2coJ1JlcXVlc3Rpbmcgbm90aWZpY2F0aW9ucyBwZXJtaXNzaW9uLi4uJyk7XG4gICBjb25zdCBwZXJtaXNzaW9uID0gYXdhaXQgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7XG5cbiAgIGlmIChwZXJtaXNzaW9uID09PSAnZ3JhbnRlZCcpIHtcbiAgICAgY29uc29sZS5sb2coJ05vdGlmaWNhdGlvbiBwZXJtaXNzaW9uIGdyYW50ZWQuJyk7XG4gICAgIC8vIE5vdGlmaWNhdGlvbiBwZXJtaXNzaW9uIGdyYW50ZWQuXG4gICAgIGF3YWl0IHNhdmVNZXNzYWdpbmdEZXZpY2VUb2tlbigpO1xuICAgfSBlbHNlIHtcbiAgICAgY29uc29sZS5sb2coJ1VuYWJsZSB0byBnZXQgcGVybWlzc2lvbiB0byBub3RpZnkuJyk7XG4gICB9XG4gfVxuXG4gLy8gVHJpZ2dlcmVkIHdoZW4gYSBmaWxlIGlzIHNlbGVjdGVkIHZpYSB0aGUgbWVkaWEgcGlja2VyLlxuIGZ1bmN0aW9uIG9uTWVkaWFGaWxlU2VsZWN0ZWQoZXZlbnQpIHtcbiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICB2YXIgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcblxuICAgLy8gQ2xlYXIgdGhlIHNlbGVjdGlvbiBpbiB0aGUgZmlsZSBwaWNrZXIgaW5wdXQuXG4gICBpbWFnZUZvcm1FbGVtZW50LnJlc2V0KCk7XG5cbiAgIC8vIENoZWNrIGlmIHRoZSBmaWxlIGlzIGFuIGltYWdlLlxuICAgaWYgKCFmaWxlLnR5cGUubWF0Y2goJ2ltYWdlLionKSkge1xuICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICBtZXNzYWdlOiAnWW91IGNhbiBvbmx5IHNoYXJlIGltYWdlcycsXG4gICAgICAgdGltZW91dDogMjAwMFxuICAgICB9O1xuICAgICBzaWduSW5TbmFja2JhckVsZW1lbnQuTWF0ZXJpYWxTbmFja2Jhci5zaG93U25hY2tiYXIoZGF0YSk7XG4gICAgIHJldHVybjtcbiAgIH1cbiAgIC8vIENoZWNrIGlmIHRoZSB1c2VyIGlzIHNpZ25lZC1pblxuICAgaWYgKGNoZWNrU2lnbmVkSW5XaXRoTWVzc2FnZSgpKSB7XG4gICAgIHNhdmVJbWFnZU1lc3NhZ2UoZmlsZSk7XG4gICB9XG4gfVxuXG4gLy8gVHJpZ2dlcmVkIHdoZW4gdGhlIHNlbmQgbmV3IG1lc3NhZ2UgZm9ybSBpcyBzdWJtaXR0ZWQuXG4gZnVuY3Rpb24gb25NZXNzYWdlRm9ybVN1Ym1pdChlKSB7XG4gICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAvLyBDaGVjayB0aGF0IHRoZSB1c2VyIGVudGVyZWQgYSBtZXNzYWdlIGFuZCBpcyBzaWduZWQgaW4uXG4gICBpZiAobWVzc2FnZUlucHV0RWxlbWVudC52YWx1ZSAmJiBjaGVja1NpZ25lZEluV2l0aE1lc3NhZ2UoKSkge1xuICAgICBzYXZlTWVzc2FnZShtZXNzYWdlSW5wdXRFbGVtZW50LnZhbHVlKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgIC8vIENsZWFyIG1lc3NhZ2UgdGV4dCBmaWVsZCBhbmQgcmUtZW5hYmxlIHRoZSBTRU5EIGJ1dHRvbi5cbiAgICAgICByZXNldE1hdGVyaWFsVGV4dGZpZWxkKG1lc3NhZ2VJbnB1dEVsZW1lbnQpO1xuICAgICAgIHRvZ2dsZUJ1dHRvbigpO1xuICAgICB9KTtcbiAgIH1cbiB9XG5cbiAvLyBUcmlnZ2VycyB3aGVuIHRoZSBhdXRoIHN0YXRlIGNoYW5nZSBmb3IgaW5zdGFuY2Ugd2hlbiB0aGUgdXNlciBzaWducy1pbiBvciBzaWducy1vdXQuXG4gZnVuY3Rpb24gYXV0aFN0YXRlT2JzZXJ2ZXIodXNlcikge1xuICAgaWYgKHVzZXIpIHsgLy8gVXNlciBpcyBzaWduZWQgaW4hXG4gICAgIC8vIEdldCB0aGUgc2lnbmVkLWluIHVzZXIncyBwcm9maWxlIHBpYyBhbmQgbmFtZS5cbiAgICAgdmFyIHByb2ZpbGVQaWNVcmwgPSBnZXRQcm9maWxlUGljVXJsKCk7XG4gICAgIHZhciB1c2VyTmFtZSA9IGdldFVzZXJOYW1lKCk7XG5cbiAgICAgLy8gU2V0IHRoZSB1c2VyJ3MgcHJvZmlsZSBwaWMgYW5kIG5hbWUuXG4gICAgIHVzZXJQaWNFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIGFkZFNpemVUb0dvb2dsZVByb2ZpbGVQaWMocHJvZmlsZVBpY1VybCkgKyAnKSc7XG4gICAgIHVzZXJOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJOYW1lO1xuXG4gICAgIC8vIFNob3cgdXNlcidzIHByb2ZpbGUgYW5kIHNpZ24tb3V0IGJ1dHRvbi5cbiAgICAgdXNlck5hbWVFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgIHVzZXJQaWNFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgIHNpZ25PdXRCdXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG5cbiAgICAgLy8gSGlkZSBzaWduLWluIGJ1dHRvbi5cbiAgICAgc2lnbkluQnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICd0cnVlJyk7XG5cbiAgICAgLy8gV2Ugc2F2ZSB0aGUgRmlyZWJhc2UgTWVzc2FnaW5nIERldmljZSB0b2tlbiBhbmQgZW5hYmxlIG5vdGlmaWNhdGlvbnMuXG4gICAgIHNhdmVNZXNzYWdpbmdEZXZpY2VUb2tlbigpO1xuICAgfSBlbHNlIHsgLy8gVXNlciBpcyBzaWduZWQgb3V0IVxuICAgICAvLyBIaWRlIHVzZXIncyBwcm9maWxlIGFuZCBzaWduLW91dCBidXR0b24uXG4gICAgIHVzZXJOYW1lRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICd0cnVlJyk7XG4gICAgIHVzZXJQaWNFbGVtZW50LnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJ3RydWUnKTtcbiAgICAgc2lnbk91dEJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAndHJ1ZScpO1xuXG4gICAgIC8vIFNob3cgc2lnbi1pbiBidXR0b24uXG4gICAgIHNpZ25JbkJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTtcbiAgIH1cbiB9XG5cbiAvLyBSZXR1cm5zIHRydWUgaWYgdXNlciBpcyBzaWduZWQtaW4uIE90aGVyd2lzZSBmYWxzZSBhbmQgZGlzcGxheXMgYSBtZXNzYWdlLlxuIGZ1bmN0aW9uIGNoZWNrU2lnbmVkSW5XaXRoTWVzc2FnZSgpIHtcbiAgIC8vIFJldHVybiB0cnVlIGlmIHRoZSB1c2VyIGlzIHNpZ25lZCBpbiBGaXJlYmFzZVxuICAgaWYgKGlzVXNlclNpZ25lZEluKCkpIHtcbiAgICAgcmV0dXJuIHRydWU7XG4gICB9XG5cbiAgIC8vIERpc3BsYXkgYSBtZXNzYWdlIHRvIHRoZSB1c2VyIHVzaW5nIGEgVG9hc3QuXG4gICB2YXIgZGF0YSA9IHtcbiAgICAgbWVzc2FnZTogJ1lvdSBtdXN0IHNpZ24taW4gZmlyc3QnLFxuICAgICB0aW1lb3V0OiAyMDAwXG4gICB9O1xuICAgc2lnbkluU25hY2tiYXJFbGVtZW50Lk1hdGVyaWFsU25hY2tiYXIuc2hvd1NuYWNrYmFyKGRhdGEpO1xuICAgcmV0dXJuIGZhbHNlO1xuIH1cblxuIC8vIFJlc2V0cyB0aGUgZ2l2ZW4gTWF0ZXJpYWxUZXh0RmllbGQuXG4gZnVuY3Rpb24gcmVzZXRNYXRlcmlhbFRleHRmaWVsZChlbGVtZW50KSB7XG4gICBlbGVtZW50LnZhbHVlID0gJyc7XG4gICBlbGVtZW50LnBhcmVudE5vZGUuTWF0ZXJpYWxUZXh0ZmllbGQuYm91bmRVcGRhdGVDbGFzc2VzSGFuZGxlcigpO1xuIH1cblxuIC8vIFRlbXBsYXRlIGZvciBtZXNzYWdlcy5cbiB2YXIgTUVTU0FHRV9URU1QTEFURSA9XG4gICAgICc8ZGl2IGNsYXNzPVwibWVzc2FnZS1jb250YWluZXJcIj4nICtcbiAgICAgICAnPGRpdiBjbGFzcz1cInNwYWNpbmdcIj48ZGl2IGNsYXNzPVwicGljXCI+PC9kaXY+PC9kaXY+JyArXG4gICAgICAgJzxkaXYgY2xhc3M9XCJtZXNzYWdlXCI+PC9kaXY+JyArXG4gICAgICAgJzxkaXYgY2xhc3M9XCJuYW1lXCI+PC9kaXY+JyArXG4gICAgICc8L2Rpdj4nO1xuXG4gLy8gQWRkcyBhIHNpemUgdG8gR29vZ2xlIFByb2ZpbGUgcGljcyBVUkxzLlxuIGZ1bmN0aW9uIGFkZFNpemVUb0dvb2dsZVByb2ZpbGVQaWModXJsKSB7XG4gICBpZiAodXJsLmluZGV4T2YoJ2dvb2dsZXVzZXJjb250ZW50LmNvbScpICE9PSAtMSAmJiB1cmwuaW5kZXhPZignPycpID09PSAtMSkge1xuICAgICByZXR1cm4gdXJsICsgJz9zej0xNTAnO1xuICAgfVxuICAgcmV0dXJuIHVybDtcbiB9XG5cbiAvLyBBIGxvYWRpbmcgaW1hZ2UgVVJMLlxuIHZhciBMT0FESU5HX0lNQUdFX1VSTCA9ICdodHRwczovL3d3dy5nb29nbGUuY29tL2ltYWdlcy9zcGluLTMyLmdpZj9hJztcblxuIC8vIERlbGV0ZSBhIE1lc3NhZ2UgZnJvbSB0aGUgVUkuXG4gZnVuY3Rpb24gZGVsZXRlTWVzc2FnZShpZCkge1xuICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgIC8vIElmIGFuIGVsZW1lbnQgZm9yIHRoYXQgbWVzc2FnZSBleGlzdHMgd2UgZGVsZXRlIGl0LlxuICAgaWYgKGRpdikge1xuICAgICBkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaXYpO1xuICAgfVxuIH1cblxuIGZ1bmN0aW9uIGNyZWF0ZUFuZEluc2VydE1lc3NhZ2UoaWQsIHRpbWVzdGFtcCkge1xuICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICBjb250YWluZXIuaW5uZXJIVE1MID0gTUVTU0FHRV9URU1QTEFURTtcbiAgIGNvbnN0IGRpdiA9IGNvbnRhaW5lci5maXJzdENoaWxkO1xuICAgZGl2LnNldEF0dHJpYnV0ZSgnaWQnLCBpZCk7XG5cbiAgIC8vIElmIHRpbWVzdGFtcCBpcyBudWxsLCBhc3N1bWUgd2UndmUgZ290dGVuIGEgYnJhbmQgbmV3IG1lc3NhZ2UuXG4gICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDc3ODE0MzIvNDgxNjkxOFxuICAgdGltZXN0YW1wID0gdGltZXN0YW1wID8gdGltZXN0YW1wLnRvTWlsbGlzKCkgOiBEYXRlLm5vdygpO1xuICAgZGl2LnNldEF0dHJpYnV0ZSgndGltZXN0YW1wJywgdGltZXN0YW1wKTtcblxuICAgLy8gZmlndXJlIG91dCB3aGVyZSB0byBpbnNlcnQgbmV3IG1lc3NhZ2VcbiAgIGNvbnN0IGV4aXN0aW5nTWVzc2FnZXMgPSBtZXNzYWdlTGlzdEVsZW1lbnQuY2hpbGRyZW47XG4gICBpZiAoZXhpc3RpbmdNZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgbWVzc2FnZUxpc3RFbGVtZW50LmFwcGVuZENoaWxkKGRpdik7XG4gICB9IGVsc2Uge1xuICAgICBsZXQgbWVzc2FnZUxpc3ROb2RlID0gZXhpc3RpbmdNZXNzYWdlc1swXTtcblxuICAgICB3aGlsZSAobWVzc2FnZUxpc3ROb2RlKSB7XG4gICAgICAgY29uc3QgbWVzc2FnZUxpc3ROb2RlVGltZSA9IG1lc3NhZ2VMaXN0Tm9kZS5nZXRBdHRyaWJ1dGUoJ3RpbWVzdGFtcCcpO1xuXG4gICAgICAgaWYgKCFtZXNzYWdlTGlzdE5vZGVUaW1lKSB7XG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgIGBDaGlsZCAke21lc3NhZ2VMaXN0Tm9kZS5pZH0gaGFzIG5vICd0aW1lc3RhbXAnIGF0dHJpYnV0ZWBcbiAgICAgICAgICk7XG4gICAgICAgfVxuXG4gICAgICAgaWYgKG1lc3NhZ2VMaXN0Tm9kZVRpbWUgPiB0aW1lc3RhbXApIHtcbiAgICAgICAgIGJyZWFrO1xuICAgICAgIH1cblxuICAgICAgIG1lc3NhZ2VMaXN0Tm9kZSA9IG1lc3NhZ2VMaXN0Tm9kZS5uZXh0U2libGluZztcbiAgICAgfVxuXG4gICAgIG1lc3NhZ2VMaXN0RWxlbWVudC5pbnNlcnRCZWZvcmUoZGl2LCBtZXNzYWdlTGlzdE5vZGUpO1xuICAgfVxuXG4gICByZXR1cm4gZGl2O1xuIH1cblxuIC8vIERpc3BsYXlzIGEgTWVzc2FnZSBpbiB0aGUgVUkuXG4gZnVuY3Rpb24gZGlzcGxheU1lc3NhZ2UoaWQsIHRpbWVzdGFtcCwgbmFtZSwgdGV4dCwgcGljVXJsLCBpbWFnZVVybCkge1xuICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSB8fCBjcmVhdGVBbmRJbnNlcnRNZXNzYWdlKGlkLCB0aW1lc3RhbXApO1xuXG4gICAvLyBwcm9maWxlIHBpY3R1cmVcbiAgIGlmIChwaWNVcmwpIHtcbiAgICAgZGl2LnF1ZXJ5U2VsZWN0b3IoJy5waWMnKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKCcgKyBhZGRTaXplVG9Hb29nbGVQcm9maWxlUGljKHBpY1VybCkgKyAnKSc7XG4gICB9XG5cbiAgIGRpdi5xdWVyeVNlbGVjdG9yKCcubmFtZScpLnRleHRDb250ZW50ID0gbmFtZTtcbiAgIHZhciBtZXNzYWdlRWxlbWVudCA9IGRpdi5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZScpO1xuXG4gICBpZiAodGV4dCkgeyAvLyBJZiB0aGUgbWVzc2FnZSBpcyB0ZXh0LlxuICAgICBtZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgIC8vIFJlcGxhY2UgYWxsIGxpbmUgYnJlYWtzIGJ5IDxicj4uXG4gICAgIG1lc3NhZ2VFbGVtZW50LmlubmVySFRNTCA9IG1lc3NhZ2VFbGVtZW50LmlubmVySFRNTC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgIH0gZWxzZSBpZiAoaW1hZ2VVcmwpIHsgLy8gSWYgdGhlIG1lc3NhZ2UgaXMgYW4gaW1hZ2UuXG4gICAgIHZhciBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgbWVzc2FnZUxpc3RFbGVtZW50LnNjcm9sbFRvcCA9IG1lc3NhZ2VMaXN0RWxlbWVudC5zY3JvbGxIZWlnaHQ7XG4gICAgIH0pO1xuICAgICBpbWFnZS5zcmMgPSBpbWFnZVVybCArICcmJyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICBtZXNzYWdlRWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgbWVzc2FnZUVsZW1lbnQuYXBwZW5kQ2hpbGQoaW1hZ2UpO1xuICAgfVxuICAgLy8gU2hvdyB0aGUgY2FyZCBmYWRpbmctaW4gYW5kIHNjcm9sbCB0byB2aWV3IHRoZSBuZXcgbWVzc2FnZS5cbiAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ZGl2LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKX0sIDEpO1xuICAgbWVzc2FnZUxpc3RFbGVtZW50LnNjcm9sbFRvcCA9IG1lc3NhZ2VMaXN0RWxlbWVudC5zY3JvbGxIZWlnaHQ7XG4gICBtZXNzYWdlSW5wdXRFbGVtZW50LmZvY3VzKCk7XG4gfVxuXG4gLy8gRW5hYmxlcyBvciBkaXNhYmxlcyB0aGUgc3VibWl0IGJ1dHRvbiBkZXBlbmRpbmcgb24gdGhlIHZhbHVlcyBvZiB0aGUgaW5wdXRcbiAvLyBmaWVsZHMuXG4gZnVuY3Rpb24gdG9nZ2xlQnV0dG9uKCkge1xuICAgaWYgKG1lc3NhZ2VJbnB1dEVsZW1lbnQudmFsdWUpIHtcbiAgICAgc3VibWl0QnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICB9IGVsc2Uge1xuICAgICBzdWJtaXRCdXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgfVxuIH1cblxuIC8vIFNob3J0Y3V0cyB0byBET00gRWxlbWVudHMuXG4gdmFyIG1lc3NhZ2VMaXN0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXNzYWdlcycpO1xuIHZhciBtZXNzYWdlRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZS1mb3JtJyk7XG4gdmFyIG1lc3NhZ2VJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZScpO1xuIHZhciBzdWJtaXRCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdCcpO1xuIHZhciBpbWFnZUJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VibWl0SW1hZ2UnKTtcbiB2YXIgaW1hZ2VGb3JtRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1mb3JtJyk7XG4gdmFyIG1lZGlhQ2FwdHVyZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVkaWFDYXB0dXJlJyk7XG4gdmFyIHVzZXJQaWNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXItcGljJyk7XG4gdmFyIHVzZXJOYW1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyLW5hbWUnKTtcbiB2YXIgc2lnbkluQnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWduLWluJyk7XG4gdmFyIHNpZ25PdXRCdXR0b25FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ24tb3V0Jyk7XG4gdmFyIHNpZ25JblNuYWNrYmFyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtdXN0LXNpZ25pbi1zbmFja2JhcicpO1xuXG4gLy8gU2F2ZXMgbWVzc2FnZSBvbiBmb3JtIHN1Ym1pdC5cbiBtZXNzYWdlRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgb25NZXNzYWdlRm9ybVN1Ym1pdCk7XG4gc2lnbk91dEJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaWduT3V0VXNlcik7XG4gc2lnbkluQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNpZ25Jbik7XG5cbiAvLyBUb2dnbGUgZm9yIHRoZSBidXR0b24uXG4gbWVzc2FnZUlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRvZ2dsZUJ1dHRvbik7XG4gbWVzc2FnZUlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0b2dnbGVCdXR0b24pO1xuXG4gLy8gRXZlbnRzIGZvciBpbWFnZSB1cGxvYWQuXG4gaW1hZ2VCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgbWVkaWFDYXB0dXJlRWxlbWVudC5jbGljaygpO1xuIH0pO1xuIG1lZGlhQ2FwdHVyZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25NZWRpYUZpbGVTZWxlY3RlZCk7XG5cbmNvbnN0IGZpcmViYXNlQXBwID0gaW5pdGlhbGl6ZUFwcChnZXRGaXJlYmFzZUNvbmZpZygpKTtcbmdldFBlcmZvcm1hbmNlKCk7XG5pbml0RmlyZWJhc2VBdXRoKCk7XG5sb2FkTWVzc2FnZXMoKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;